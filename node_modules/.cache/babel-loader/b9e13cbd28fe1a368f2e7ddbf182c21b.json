{"ast":null,"code":"import _objectDestructuringEmpty from\"/Users/sze/Desktop/chatroom-wechat/chatroom/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";import _slicedToArray from\"/Users/sze/Desktop/chatroom-wechat/chatroom/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./Login.css';import{auth,provider}from'./firebase';import{actionTypes}from'./reducer';import{useStateValue}from'./StateProvider';import firebase from'firebase';function Login(){var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2);_objectDestructuringEmpty(_useStateValue2[0]);var dispatch=_useStateValue2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var signIn=function signIn(){firebase.auth().signInWithEmailAndPassword(email,password).then(function(result){dispatch({type:actionTypes.SET_USER,user:result.user});}).catch(function(error){return alert(error.message);});};var switchSignup=function switchSignup(){document.querySelector('.hideLogin').style.display='none';document.querySelector('.hideSignup').style.display='block';};var switchLogin=function switchLogin(){document.querySelector('.hideLogin').style.display='block';document.querySelector('.hideSignup').style.display='none';};var signup=function signup(){firebase.auth().createUserWithEmailAndPassword(email,password).then(function(result){return result.user.updateProfile({displayName:name});}).then(alert('成功注册啦！')).catch(function(error){return alert(error.message);});switchLogin();};return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"div\",{className:\"hideLogin\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login__container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u4E00\\u8D77\\u6765\\u804A\\u5929\\u5427\"),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return setEmail(e.target.value);},id:\"email\",type:\"email\",placeholder:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return setPassword(e.target.value);},id:\"password\",type:\"password\",placeholder:\"\\u5BC6\\u7801\"}),/*#__PURE__*/React.createElement(\"button\",{onClick:signIn},\"\\u767B\\u5F55\\u8D26\\u53F7\"),/*#__PURE__*/React.createElement(\"span\",{onClick:switchSignup},\" \\u6CE8\\u518C\\u8D26\\u53F7 \"))),/*#__PURE__*/React.createElement(\"div\",{className:\"hideSignup\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login__container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u6CE8\\u518C\\u7528\\u6237\"),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return setName(e.target.value);},id:\"name\",type:\"text\",placeholder:\"\\u7528\\u6237\\u540D\"}),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return setEmail(e.target.value);},id:\"email\",type:\"email\",placeholder:\"\\u90AE\\u7BB1\"}),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(e){return setPassword(e.target.value);},id:\"password\",type:\"password\",placeholder:\"\\u5BC6\\u7801\"}),/*#__PURE__*/React.createElement(\"button\",{onClick:signup},\"\\u6CE8\\u518C\"),/*#__PURE__*/React.createElement(\"button\",{onClick:switchLogin},\"\\u8FD4\\u56DE\\u767B\\u5F55\\u9875\\u9762\"))));}export default Login;","map":{"version":3,"sources":["/Users/sze/Desktop/chatroom-wechat/chatroom/src/Login.js"],"names":["React","useState","auth","provider","actionTypes","useStateValue","firebase","Login","dispatch","email","setEmail","password","setPassword","name","setName","signIn","signInWithEmailAndPassword","then","result","type","SET_USER","user","catch","error","alert","message","switchSignup","document","querySelector","style","display","switchLogin","signup","createUserWithEmailAndPassword","updateProfile","displayName","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport './Login.css';\nimport { auth, provider } from './firebase';\nimport { actionTypes } from './reducer';\nimport { useStateValue } from './StateProvider';\nimport firebase from 'firebase';\n\nfunction Login() {\n\tconst [{}, dispatch] = useStateValue();\n\tconst [email, setEmail] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [name, setName] = useState('');\n\n\tconst signIn = () => {\n\t\tfirebase\n\t\t\t.auth()\n\t\t\t.signInWithEmailAndPassword(email, password)\n\t\t\t.then((result) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: actionTypes.SET_USER,\n\t\t\t\t\tuser: result.user,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => alert(error.message));\n\t};\n\n\tconst switchSignup = () => {\n\t\tdocument.querySelector('.hideLogin').style.display = 'none';\n\t\tdocument.querySelector('.hideSignup').style.display = 'block';\n\t};\n\n\tconst switchLogin = () => {\n\t\tdocument.querySelector('.hideLogin').style.display = 'block';\n\t\tdocument.querySelector('.hideSignup').style.display = 'none';\n\t};\n\n\tconst signup = () => {\n\t\tfirebase\n\t\t\t.auth()\n\t\t\t.createUserWithEmailAndPassword(email, password)\n\t\t\t.then((result) => {\n\t\t\t\treturn result.user.updateProfile({\n\t\t\t\t\tdisplayName: name,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then(alert('成功注册啦！'))\n\t\t\t.catch((error) => alert(error.message));\n\n\t\tswitchLogin();\n\t};\n\n\treturn (\n\t\t<div className='login'>\n\t\t\t<div className='hideLogin'>\n\t\t\t\t<div className='login__container'>\n\t\t\t\t\t<h2>一起来聊天吧</h2>\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\tplaceholder='邮箱'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tplaceholder='密码'\n\t\t\t\t\t/>\n\t\t\t\t\t<button onClick={signIn}>登录账号</button>\n\t\t\t\t\t<span onClick={switchSignup}> 注册账号 </span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className='hideSignup'>\n\t\t\t\t<div className='login__container'>\n\t\t\t\t\t<h2>注册用户</h2>\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\t\tid='name'\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tplaceholder='用户名'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\tplaceholder='邮箱'\n\t\t\t\t\t/>\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\tid='password'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tplaceholder='密码'\n\t\t\t\t\t/>\n\t\t\t\t\t<button onClick={signup}>注册</button>\n\t\t\t\t\t<button onClick={switchLogin}>返回登录页面</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}